                СПРАВОЧНЫЕ ДАННЫЕ ПО ФУНКЦИЯМ BIOS

INT 10h, Функция 00h - выбор режима работы видеоадаптера
     На входе: AH - 00h
               AL - видеорежим
Позволяет задать  любой стандартный режим работы видеоадаптера.  В
регистр AL загружается номер устанавливаемого режима работы видео-
адаптера,  если  бит 7=1,  то при  установке режима видеопамять не
очищается.

INT 10h,     Функция 01h - изменение формы курсора
     На входе: AH - 01h
               CH -  верхняя граница курсора
               CL  - нижняя граница курсора.
Позволяет изменить  вертикальные  размеры курсора.  Горизонтальные
размеры курсора всегда одинаковы и равны  ширине  одного  символа.
Курсор отображается только в текстовых режимах видеоадаптера.

INT 10h, Функция 02h - изменение положения курсора.
     На входе: AH - 02h
               BH - номер страницы видеопамяти,
               DH - номер строки,
               DL - номер столбца.
Задает текущее положение курсора на экране дисплея.  Если видеопа-
мять разделена на несколько страниц,  то каждая из них имеет  свой
курсор, координаты которого можно устанавливать отдельно.

INT 10h,  Функция 03h - определение положения и  формы  курсора.
     На входе: AH - 03h
               BH - номер страницы видеопамяти
     На выходе: CH - верхняя граница курсора
                CL - нижняя граница курсора
                DH - позиция текущей строки курсора
                DL - позиция текущего столбца курсора.
Позволяет  узнать размер и текущие координаты курсора.

INT 10h, Функция 04h - использование светового пера.
Позволяет определить подключено световое перо или нет.

INT 10h, Функция 05h - изменение активной страницы видеопамяти.
     На входе: AH - 05h
               AL - номер страницы видеопамяти,  которая  станет
                    активной.

INT 10h, Функция  06h - перемещение текстового окна вверх
    На входе: AH - 06h
              AL - число строк для перемещения,
                   если  AL=0, то окно очищается целиком.
              BH - атрибут цвета для строк, возникающих снизу окна.
              CH и CL - строка и столбец верхнего левого угла окна
              DH и DL - строка и столбец нижнего правого угла окна
Определяет прямоугольную область (окно) активной  видеостраницы  и
ее содержимое перемещается вверх на одну или несколько строк.  Ос-
вобожденные внизу строки заполняются пробелами с указанными  атри-
бутами цвета, а верхние строки исчезают.

INT 10h, Функция 07h - перемещение текстового окна вниз
    На входе: AH - 07h
              AL - число строк для перемещения,
                   если  AL=0, то окно очищается целиком.
              BH - атрибут цвета для строк, возникающих снизу окна.
              CH и CL - строка и столбец верхнего левого угла окна
              DH и DL - строка и столбец нижнего правого угла окна
Подобна функции  06h,  но  пустые строки появляются в верхнй части
окна, а нижние строки исчезают.

INT 10h, Функция 08h - чтение символа и его атрибутов
     На входе: AH - 08h
               BH - номер страницы видеопамяти.
     На выходе: AH - атрибут
                AL - символ
Позволяет прочитать символ и его атрибуты из позиции экрана, опре-
деленной текущим положением курсора.  Чтение можно производить как
из активной, так и из неактивной страниц памяти.

INT 10h, Функция 09h - запись символа с атрибутами в текущей
                       позиции курсора
     На входе: AH - 09h
               AL - ASCII-код  записываемого символа
               BH - номер страницы видеопамяти
               BL - атрибут для текстового режима или
                    цвет для  графического  режима
               CX - число записываемых символов.
Позволяет записать  один или несколько одинаковых символов с атри-
бутами,  при этом запись происходит как в активную, так и неактив-
ные страницы видеопамяти. После выполнения записи положение курсо-
ра не изменяется. Управляющие символы, такие как возврат каретки и
перевод  строки,  не действуют и записываются как обычные символы.
Функция работает как в текстовых, так и в графических режимах.

INT 10h, Функция 0Ah - запись символа в текущей позиции курсора.
     На входе: AH - 0Ah
               AL - ASCII-код записываемого символа
               BH - номер страницы видеопамяти
               BL - цвет (для графического режима)
               CX - число записываемых символов.
Можно производить запись нескольких одинаковых символов  на  любой
странице видеопамяти. Атрибуты символов не задаются, а используют-
ся их старые значения из предыдущих операций записи.  После опера-
ции записи положение курсора не изменяется. Управляющие символы не
действуют и записываются как обычные символы.

INT 10h, Функция 0Сh - запись пиксела
     На входе: AH - 0Ch
               AL - номер цвета
               BH - номер страницы
               DL - номер строки от 0 до 199
               CX - номер столбца от 0 до 319 или до 639
Используется в  графических  режимах  для записи пиксела заданного
цвета в любую страницу видеопамяти. Использование функций BIOS для
создания изображений хотя и медленнее,  чем прямая запись в видео-
память и программирование регистров, но более надежно с точки зре-
ния совместимости для различных режимов и видеоадаптеров.

INT 10h, Функция 0Dh - чтение пиксела
     На входе: AX - 0Dh
               BH - номер страницы
               СХ - номер столбца
               DХ - номер строки
     На выходе: AL - цвет (номер цветового регистра)
Позволяет определить цвет любого пиксела экрана по его координатам
и используется только в графических режимах.  Цвет пиксела получа-
ется в младших байтах регистра AL.

INT 10h, Функция 0Еh  - запись символа в режиме телетайпа
     На входе: AH - 0Eh
               AL - ASCII-код записываемого символа
               BH - номер страницы  видеопамяти
                    (только в текстовых режимах)
               BL - цвет символа в графических режимах.
После отобравжения символа в текущей позиции курсора, курсор затем
сдвигается вправо на одну позицию.  При необходимости курсор авто-
матически  перемещается  на новую строку.  После заполнения экрана
происходит сдвиг экрана вверх,  причем верхняя строка исчезает,  а
внизу возникает новая пустая строка. Функция обрабатывает управля-
ющие символы: звуковой сигнал, возврат курсора назад на одну пози-
цию,  возврат  каретки и перевод строки.  В текстовых режимах цвет
символа не изменяется,  а в графических  есть  возможность  задать
цвет отображаемого символа.

INT 10h,  Функция 0Fh - определение текущего режима работы видеоа-
даптера,  номера  активной страницы и количества символов в строке
экрана.
     Hа входе: AH - 0Fh
     На выходе: AH - число символов в строке
                AL -  номер  текущего режима
                BH - номер активной странице видеопамяти.

INT 10h,  Функция  10Н  предоставляет возможность программирования
регистров цветовой палитры, таблицы цветов (VGA), а также управля-
ет некоторыми атрибутами символов.  Для EGA эта функция содержит 4
подфункции.  Номер функции задается в регистре АН, номер пофункции
- в АL.
     0    Программирование одного регистра палитры
     1    Программирование регистра цвета рамки
     2    Программирование всех регистров палитры (таблицы цветов)
     3    Управление атрибутом мигания и атрибутом интенсивности

     VGA поддерживает дополнительно еще 10 подфункций
     
     7    Чтение одного регистра палитры
     8    Чтение регистра цвета рамки
     9    Чтение всех регистров палитры
    10h   Программирование одного регистра ЦАП
    12h   Программирование нескольких регистров ЦАП
    13h   Выбор подмножества цветов
    15h   Чтение одного регистра ЦАП
    17h   Чтение нескольких регистров ЦАП
    1Ah   Чтение состояния таблицы цветов
    1Вh   Преобразование регистров ЦАП для работы
          монохромном режиме
    
INT 10h,  Функция 11Н служит для загрузки в память таблиц знакоге-
нератора.  При помощи данной функции можно загружать как стандарт-
ные таблицы знакогенератора, так и таблицы, разработанные програм-
мистом.  Загружается  вся таблица,  либо ее часть.  Данная функция
позволяет легко русифицировать видеоадаптер (не CGA  и  не  Hercu-
les). Функция содержит 11 подфункций
     00  Загрузка разработанных таблиц знакогенератора
     01  Загрузка стандартного монохромного набора символов
     02  Загрузка стандартного набора символов видеоадаптера CGA
     03  Выбор активных таблиц знакогенератора (EGA)
     04  Загрузка стандартного набора символов видеоадаптера VGA
     10h Загpузка шpифта пользователя
     20h Установка вектора прерывания 1Fh
     21h Использование  графического режима для отображения симво-
         лов пользователя
     22h Использование набора символов 8х14 из ПЗУ
     23h Использование набора символов 8х8 из ПЗУ
     24h Использование набора символов 8х16 из ПЗУ
     30h Получение информации об используемом наборе символов

INT 10h,  Функция 12h - определение конфигурации и выбор программы
распечатки экрана - содержит 9 подфункций.

     10h Определение конфигурации EGA/VGA
     20h Выбор программы печати экрана
     30h Выбор количества линий развертки в текстовом режиме
     31h Запрещение переустановки палитры цветов
     32h Управление доступом к VGA
     33h Управление преобразованием серого цвета
     34h Эмуляция курсора CGA
     35h Выбор активного дисплея (PS/2)
     36h Гашение экрана (VGA)

INT 10h, Функция 13h - вывод текстовой строки.
     Hа входе: AH - 13h
               AL - режим отображения строки
                    0 - курсор не перемещается,  атрибуты символов
                        в строке одинаковы
                    1 - курсор перемещается,  атрибуты символов  в
                        строке одинаковы
                    2 - курсор не перемещается,  атрибуты  каждого
                        символа задаются отдельно
                    3 - курсор перемещается, атрибуты каждого сим-
                        вола задаются отдельно
               ВН - номер страницы видеопамяти
               BL - атрибут, если AL содержит 0 или 1
               СХ - длина строки
               DH - номер строки экрана, в которой отображается
                    строка
               ES:BP - адрес строки в оперативной памяти
В зависимости от параметров функции можно определять атрибуты  как
строки  в  целом,  так  и отдельных символов строки.  После вывода
строки курсор может либо оставаться на месте,либо  перемещаться  в
позицию за последним символом только что выведенной строки.
     В режимах 2 и 3 атрибуты каждого символа задаются  вперемежку
с самими символами строки.  При этом сначала идет символ,  а затем
его атрибут.
     
INT 10h, Функция 1Аh  - чтение/запись конфигурации видеосистемы
Содержит две подфункции:
         00h - чтение конфигурации
         01h - запись конфигурации видеосистемы.

INT 10h, Функция 1Вh - получение данных о состоянии VGA.
     На входе: BX = 0
               ES:DI - адрес буфера для возвращения данных
                       длиной 64 байта.
     На выходе - буфер заполняется данными.

INT 10h, Функция 1Сh - сохранение/воостановление состояния видеоа-
даптера - только для видеоадаптера VGA. Функцию можно использовать
при  переключении  режима видеоадаптера в резидентных программах и
мультизадачных системах. Функция имеет 3 подфункции.
     00h - Определение размера буфера, необходимого для сохранения
           текущего состяния видеоадаптера
     01h - Сохранение текущего состояния видеоадаптера
     02h - Восстановление текущего состояния видеоадаптера.

INT 13h, Функции 00h  -  сброс  контроллера  (Reset)
     Hа входе: AH - 00h
               DL - дисковод
Осуществляет сброс (приводит в начальное состояние) контроллер дискет-
ных устройств.  Это не отражается на дискете, находящейся в данный мо-
мент в устройстве. После сброса контроллер принимает, что головки всех
устройств позиционированы на дорожке 0,  что в общем  случае  неверно.
Поэтому при выполнении операции BIOS обнуляет биты 0-3 байта по адресу
43ЕН (бит 0 относится к устройству А,  бит 1 - к устройству В и т.д.).
При каждой операции для определенного устройства проверяется состояние
соответствующего ему бита этого байта. Если он равен 0, перед операци-
ей головка позиционируется на дорожке 0 (рекалибровка), после чего вы-
полняется операция и в соответствующий бит записывается 1. Сброс конт-
роллера  обычно  осуществляется  после ошибки при выполнении некоторых
функций.

INT 13h, Функция 01h - получить состояние дисковой системы
Возвращает в AL информацию о последней выполненной операции. Такая ин-
формация записывается в один байт по адресу 441Н после каждой операции
с дискетой.
        На входе DL - дисковод:  00Н - 07Н - гибкий диск
                              80Н - FFH - жесткий диск
            AL = 00h - операция выполнена успешно.
                 01h - недействительная команда
                 02h - не обнаружено или ошибочно адресное поле
                 03h - попытка записи на защищенную дискету (Г)
                 04h - сектор не обнаружен
                 05h - сброс в исходное состояние не выполнен (Ж)
                 06h - гибкий диск снят (Г)
                 07h - дефектная таблица параметров (Ж)
                 08h - нарушение границ ПДП (Г)
                 09h - ПДП (DMA) пересек границу 64Кбайт
                 0Аh - флаг дефектного сектора (Ж)
                 0Вh - флаг дефектной дорожки (Ж)
                 0Сh - не найден тип носителя (Г)
                 0Dh - недопустимое число секторов при форматиро-
                       вании (Ж)
                 0Fh - обнаружена метка адреса управляющих данных (Ж)
                 10h - невосстановимая ошибка циклического контро-
                       ля или ошибка кода проверки и корректировки
                       данных по избыточности (CRC)
                 11h - ошибка данных скорректирована кодом провер-
                       ки и корректировки (Ж) (обнаружение вооста-
                       новимой  ошибки  в процессе предшествующего
                       чтения сектора)
                 20h - отказ контроллера
                 40h - сбой  поиска
                 80h - нет ответа от устройства (тайм-аут)
                 AAh - дисковод не готов (Ж)
                 BBh - неопределенная ошибка (Ж)
                 ССh - отказ записи (Ж)
                 Е0h - ошибка регистра состояния (Ж)
                 FFh - операция опознания не выполнилась (Ж)

INT 13h, Функция 02h - чтение секторов.
         Функция 03h - запись секторов.
         Функция 04h - проверка секторов - осуществляется проверка
                       могут ли быть обнаружены и прочитаны секто-
                       ры и проверка данных.
     На входе: AH - номеp функции
               DL - номер устройства (0-3)
               DH - сторона дискеты (0-1)
               CH - номер дорожки
               CL - номер первого сектора
               AL - число секторов для чтения (записи)
               ES:BX -  адрес  входного (выходного) буфера (не ис-
                       пользуется функцией 04Н)
При использовании жестких дисков старшие два бита 10-битного номе-
ра цилиндра помещаются в старшие два бита регистра CL.
Секторы должны быть заранее форматированы.

INT 13h, Функция 05h - форматирование дорожки.
     На входе: AH - 05h
               DL - номер устройства (0-3)
               DH - сторона дискеты (0-1)
               CH - цилиндp
               AL - число секторов для фоpматиpования
               ES:BX -  адрес буфера
Дорожка форматируется целиком без возможности  форматирования  от-
дельного сектора.  Однако, каждый сектор может иметь разные харак-
теристики. Для каждого сектора готовятся 4 байта, которые его опи-
сывают - так называемое адресное поле. Пара регистров ES:BX должна
указывать область,в которой последовательно записаны адресные поля
будущих секторов. Четыре байта адресного поля имеют обозначения:
          С - цилиндр
          Н - головка (номер поверхности)
          R - запись (номер сектора)
          N - код размера сектора (без адресного поля)
При форматировании адресные поля тоже записываются  на  дорожку  в
начале  соответствующего сектора.  Когда нужно записать или прочи-
тать сектор,сначала  осуществляется  позиционирование  головки  на
требуемую  поверхность и дорожку.  Затем на дорожке осуществляется
поиск сектора, номер которого совпадает со значением в CL. Байты С
и Н используются только для проверки.  Число байтов, которое нужно
прочитать или записать,  определяется байтом N. При форматировании
байту N можно задавать значения 0,  1,  2 и 3,  которые обозначают
соответственно 128,  256,  512 и 1024 байта. DOS всегда использует
размер сектора 512 байтов.

INT 13h, Функция 10h - получить состояние дисковода
     На входе: AH - 10h
               DL:  80Н - FFH жесткий диск
     На выходе: АН - 0, если SF=0
                АН - код ошибки, если CF=1 (cм. функцию 01Н)
Проверяет, является ли указанный дисковод жесткого диска  работос-
пособным и возвращает его состояние.
     
INT 13h, Функция 15h  - получить тип дисковода.
     На входе: AH - 15h
               DL - дисковод
     На выходе: АН - код типа дисковода
                   00h - дисковод отсутствует
                   01h - используется дисковод гибкого  диска  без
                         поддержки сигнала смены носителя
                   02h - используется  дисковод  гибкого  диска  с
                         поддержкой сигнала смены носителя
                   03h - используется жесткий диск,  в этом случае
                         CX:DX - число 512-байтный секторов
                АН - код ошибки, если CF=1 (cм. функцию 01Н)
Возвращает код указанного дисковода,  соответствующий типу гибкого
или жесткого диска.
                                                
INT 13h, Функция 17h - установить тип диска для форматирования.
     На входе:  AH - 17h
                AL - тип формата
                     01Н - диск 320/360К на дисководе 360К
                     02Н - диск 320/360К на дисководе 1.2М
                     03Н - диск 1.2М на дисководе 1.2М
                     04Н - диск 720К на дисководе 720К
                 DL - номер дисковода
     На выходе:  АН - код ошибки, если CF=1 (cм. функцию 01Н)
Выбирает тип гибкого диска для указанного дисковода.
Функция не обслуживает дисководы 1.44М.
     
INT 13h, Функция 18h - установить тип носителя для форматирования.
     На входе: AH - 18h
               CH - число цилиндров
               CL - число секторов на дорожке
               DL - дисковод
     На выходе:  ES:DI - адрес таблицы параметров диска для типа носи-
                         теля об'емом 11 байт
                 АН - код ошибки, если CF=1 (cм. функцию 01Н)
Выбирает характеристики носителя  для  указанного  дисковода.  Эту
функцию  следует  вызывать  перед  форматированием диска с помощью
функции 05Н, чтобы программы BIOS могли установить для конкретного
носителя правильное значение скорости передачи данных.
     
INT 13h, Функция 19Н  -  парковать головки.
Перемещает позиционер головок чтения-записи на дорожку, не исполь-
зуемую для хранения данных, чтобы исключить повреждение данных при
выключении дисковода. Используется только для жестких дисков.

ВHИМАHИЕ: При наличии контроллера SCSI использование функций 18Н и
19Н может привести к конфликтным ситуациям. Функция 18Н - получить
информацию о контроллере SCSI.  Функция 19Н  -  реинициализировать
дисковод SCSI.
     
INT 16h, Функция 00h - чтение очередного символа с клавиатуры.
     На входе: AH - 00h
     На выходе: AH - скен-код
                AL - символ ASCII
Читает информацию об очередном нажатом символе из буфера клавиату-
ры.  Если буфер пуст, ожидается появления символа. В AL получается
скен-код символа,  а в AH - позиционный код клавиши.  Для клавиш и
клавишных комбинаций, которые представляются расширенным кодом, AL
равен 0 а AH содержит расширенный код клавиши.  Если символ введен
при помощи ALT и клавиш цифрового поля,  значение AH равно 0. Про-
читанный символ удаляется из буфера.

INT 16h, Функция 01h - справка  о наличии символа
     На входе: AH - 01h
     На выходе: ZF=0,  если в буфере клавиатуры есть символ
                AH - скен-код символа
                AL - ASCII-код символа
                ZF= 1, если буфер пуст.
Определяет, имеются ли в кольцевом буфере ожидающие  ввода  симво-
лы. Символ остается в буфере.

INT 16h, Функция 02h - информация о состоянии.
     На входе: AH - 02h
     На выходе: AL - флаги
Функция возвращает в регистр AL содержимое первого из двух  байтов
состояния  клавиатуры  с  абсолютными  адресами 417Н и 418Н.  Если
программа интересуется содержимым второго байта, она должна прочи-
тать его прямо, как адрес памяти.
